<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    <link href="style.css" type="text/css" rel="stylesheet" />
    <title>CSE168 Final project - Alisha Lawson, Hallgeir Lien</title>
</head>

<body>
    <h1>CSE168 Final project (some fancy title?)</h1>
    <p>
        In our final project we wanted to blablabla. For all images, click on them to show them in full size.
    </p>
    
    <h2>Project idea and inspiration</h2>
    <p>
        Our inspiration was this photo of a flower after a rain shower. In particular, we wanted to capture some of the complex lighting in the raindrops like the caustics, highlights and shadows, as well as getting a good looking flower. (rephrase)
    </p>
    <a href="http://www.flickr.com/photos/hallgeirl/4882814342/sizes/l/in/photostream/" target="_blank">
        <img src="http://farm5.static.flickr.com/4140/4882814342_1a8205a391_b_d.jpg" alt="Our final image" />
    </a>    
    
    <h2>Results</h2>
    <p>
        Here we present the results from the rendering and a description of the scene. 
    </p>
        
    <a href="img/final_large.png" target="_blank">
        <img src="img/final_large.png" alt="Our final image" />
    </a>
    
    <h3>Modelling</h3>
    <p>
        The flower is modelled in 3ds Max, and consists of 248768 triangles in total. Each part (the stem, petals, center, leaf and raindrops) were stored separately for easier texturing.
    </p>
    <!-- Screenshots here from 3ds max? I see others include that, maybe it's the cool thing to do -->
    
    <h3>Textures</h3>
    <p>
        All of the textures on the flower is procedurally generated. The leaf and stem have a faint cellular texture, with some added perlin noise on top. However, the environment map is loaded from a HDR texture and tone mapped.
    </p>
    
    <h3>Lighting</h3>
    <p>
        For lighting of the scene, we implemented a circular directed area light which had the role as the sun. We could have used a point light very, very far away, but then generating the photon maps would take a very long time as most photons would miss the surfaces. A directed area light solves this by shooting all photons in the direction of the light's normal within a specified radius. We also modified the direct lighting code to take the radius of the light as well as the direction into account.
    </p>
    
    <h4>Photon map</h3>
    <p>
        We implemented photon mapping in our ray tracer for indirect lighting, including caustics. We used a caustics and a global photon map. We used the Photon_map class provided by Professor Henrik Wann Jensen for storing and looking up the photons. The number of photons we used in the scene is fairly modest; 200 000 photons for caustics, and 200 000 photons for the global photon map, but we found this to be sufficient.
    </p>
    <p>
        When building the photon maps, we loop over each light, and for each light we call our light's samplePhotonDirection() function which gives a direction according to the type of light (e.g. a point light would give a random direction, a directed light source would return the normal of the light, and so on). We also sample the light source's origin with samplePhotonOrigin() in the same way. Finally we select the power to be the light source's wattage. We scale the photon power in the end after the light source has shot out all photons, because we don't know how many photons we have to send out in order to store the specified number of photons that we specify. We then call our tracePhoton() function which will trace the photons through the scene.
    </p>
    
    <p>
    
    </p>
    
    <h3>Depth of field</h3>
    <p>When a camera lens is quite close to an object, for instance when doing macro photography, you get a rather narrow depth of field. We wanted to have that effect in our image, and we believe we got it pretty right. </p>

    <h2>Technical details</h2>
    

    
    
<!--    <h3>Raindrop shadows</h3>
    If a raindrop sits at a surface, and we shoot a ray from the camera and into the raindrop, and that ray eventually hits the surface, a shadow ray is traced back to the light source to test if it's in the shadow. If using shadow rays naively as for solid objects, that ray would not give any contribution, because the rain drop is blocking the path.
     However, there should be 
    -->
    <h2>Division of work</h2>
    <p>
        We believe we divided the work amongst us quite evenly. Below is a quick overview of what each of us did for assignment 3.
        <div class="listheader">Alisha</div>
        <ul>
            <li>Depth of field</li>
            <li>Modelling</li>
            <li>Caustic photon map generation</li>
            <li>Petal textures</li>
            <li>Raindrop tweaking (Both)</li>
        </ul>    
        
        <div class="listheader">Hallgeir</div>
        <ul>
            <li>Global photon map generation and photon tracing</li>
            <li>Directed area light</li>
            <li>Fresnel reflection</li>
            <li>Leaf and stem textures</li>
            <li>Raindrop tweaking (Both)</li>
        </ul>
    </p>
    <p>
        For previous assignments, the division was approximately as follows.
        
        <div class="listheader">Alisha</div>
        <ul>
            <li>BVH box intersection and traversal</li>
            <li>Path tracing</li>
            <li>Original recursive ray tracing (reflection, refraction)</li>
            <li>Statistics</li>
            <li>SSE optimizations (1 ray vs 1 triangle, assignment 1)
        </ul> 
        
        <div class="listheader">Hallgeir</div>
        <ul>
            <li>Triangle intersection</li>
            <li>Environment map</li>
            <li>Bump mapping</li>
            <li>BVH building</li>
            <li>SSE optimizations (1 ray vs. 4 triangles &amp; 1 ray vs 2 boxes, assignment 2)
        </ul>
    </p>

    
    <h2>A selection of alternative versions of the flower</h2>
    <p>
        We tried to render this image on a 8bit Nintendo. This is the result:
    </p>
    <a href="img/8bitflower.png" target="_blank">
        <img src="img/8bitflower.png" alt="8 bit flower" />
    </a>
    
    <p>
        A small selection of glass flowers
    </p>
    <a href="img/glassflower.png" target="_blank">
        <img src="img/glassflower.png" alt="Glass flower" />
    </a>
    <a href="img/glassflower2.png" target="_blank">
        <img src="img/glassflower2.png" alt="Glass flower 2" />
    </a>
</body>
</html>

